# Matter Certis 크롤러 리팩토링 문서

## 리팩토링 진행 과정

### 1단계: 코드 분리 및 모듈화 (완료)
- `page-errors.ts`: 페이지 조작 관련 에러 클래스 정의
- `page-cache-manager.ts`: 페이지 캐싱 메커니즘 구현
- `product-list-types.ts`: 타입 정의 추출
- `product-list-constants.ts`: 상수 값 추출

### 2단계: 유틸리티 클래스 구현 (완료)
- `page-crawler.ts`: 페이지 크롤링 로직
- `product-data-processor.ts`: 제품 데이터 처리
- `progress-manager.ts`: 진행 상황 관리

### 3단계: ProductListCollector 리팩토링 (진행 중)
- 유틸리티 클래스 통합
- 중복 코드 제거
- 책임 분리

## 리팩토링 주요 개선 사항

### 1. 코드 구조 개선
- 관심사 분리(Separation of Concerns)
  - 페이지 크롤링: `PageCrawler`
  - 데이터 처리: `ProductDataProcessor`
  - 진행 상황 관리: `ProgressManager`
- 클래스 크기 감소
  - `ProductListCollector`의 역할과 코드량 감소
  - 기능별 독립된 클래스로 분리

### 2. 유지보수성 향상
- 응집도 높은 클래스 구현
- 명확한 책임과 경계
- 코드 이해도 및 수정 용이성 증가

### 3. 테스트 용이성 개선
- 분리된 클래스에 대한 개별 테스트 가능
- 의존성 명확화

### 4. 향후 개선 계획
- 의존성 주입 패턴 도입
- 인터페이스 기반 설계로 전환
- 에러 처리 강화

## 클래스 다이어그램

```
                          ┌───────────────────────┐
                          │ ProductListCollector  │
                          └───────────┬───────────┘
                                      │
                                      │ 사용
                                      ▼
┌─────────────────┐     ┌─────────────┴────────────┐     ┌─────────────────────┐
│   PageCrawler   │◄────┤      의존성 관계         ├────►│ ProductDataProcessor│
└─────────────────┘     └─────────────┬────────────┘     └─────────────────────┘
                                      │
                                      │
                                      ▼
                         ┌─────────────────────┐
                         │   ProgressManager   │
                         └─────────────────────┘
```

## 적용된 디자인 패턴
1. **단일 책임 원칙(SRP)**: 각 클래스는 하나의 책임만 가집니다.
2. **의존성 역전 원칙(DIP)**: 구체적 구현보다 추상화에 의존합니다.
3. **퍼사드 패턴**: `ProductListCollector`가 복잡한 하위 시스템을 간단한 인터페이스로 제공합니다.
4. **전략 패턴**: 다양한 알고리즘을 캡슐화하여 교체 가능하게 합니다.

## 성능 개선
- 캐싱 메커니즘 개선
- 리소스 사용 최적화
- 페이지 로딩 전략 개선

## 다음 단계
- 완전한 인터페이스 기반 아키텍처로 전환
- 단위 테스트 구현
- 에러 처리 및 복구 메커니즘 강화
