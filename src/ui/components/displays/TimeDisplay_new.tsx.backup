import React from 'react';
import { useCrawlingStore } from '../../hooks/useCrawlingStore';

const TimeDisplay: React.FC = () => {
  const { progress, status } = useCrawlingStore();
  
  const formatTime = (seconds: number): string => {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    
    if (hours > 0) {
      return `${hours}시간 ${minutes}분 ${secs}초`;
    } else if (minutes > 0) {
      return `${minutes}분 ${secs}초`;
    } else {
      return `${secs}초`;
    }
  };

  const elapsedTime = progress?.elapsedTime || 0;
  const remainingTime = progress?.remainingTime || 0;
  const remaining = Math.max(0, remainingTime / 1000); // Convert milliseconds to seconds

  return (
    <div className="space-y-3">
      <div className="flex justify-between items-center">
        <span className="text-sm text-gray-600 dark:text-gray-400">경과 시간</span>
        <span className="text-sm font-medium text-gray-900 dark:text-gray-100">
          {formatTime(elapsedTime / 1000)} {/* Convert milliseconds to seconds */}
        </span>
      </div>
      
      {status === 'running' && remaining > 0 && (
        <div className="flex justify-between items-center">
          <span className="text-sm text-gray-600 dark:text-gray-400">남은 시간</span>
          <span className="text-sm font-medium text-blue-600 dark:text-blue-400">
            약 {formatTime(remaining)}
          </span>
        </div>
      )}
    </div>
  );
};

export { TimeDisplay };
export default TimeDisplay;
